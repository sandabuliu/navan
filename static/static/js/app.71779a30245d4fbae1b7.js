webpackJsonp([1],{151:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(60),o=r(s),n=a(403),l=r(n),i=a(223),u=r(i),d=a(222),c=r(d);t.default={draw_options:function(e,t,a,r){return this.hasOwnProperty(t)?(0,c.default)({title:{text:e}},this[t](a,r)):{}},basedraw:function(e,t,a,r,s){var o=[],n=[];for(var l in t)n.push(l),o.push({name:l,data:t[l],type:a,stack:r,areaStyle:s});return{xAxis:{type:"category",data:e},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:{type:"value"},series:o,legend:{data:n}}},singledraw:function(e,t,a,r){var s={type:a,data:[],label:r},o=[],n=(0,u.default)(t)[0];for(var l in e)o.push(e[l]),s.data.push({name:e[l],value:t[n][l]});return{tooltip:{formatter:"{b} : {c} ({d}%)"},series:s,legend:{orient:"horizontal",left:"center",data:o}}},bar:function(e,t){return this.basedraw(e,t,"bar")},stack:function(e,t){return this.basedraw(e,t,"bar","stack")},line:function(e,t){return this.basedraw(e,t,"line")},area:function(e,t){return this.basedraw(e,t,"line",null,{normal:{}})},stackarea:function(e,t){return this.basedraw(e,t,"line","stack",{normal:{}})},radar:function(e,t){var a=[{type:"radar",data:[]}],r={indicator:[]},s={data:[]};for(var n in e){var i=(0,l.default)(t).map(function(e){return e[n]}),u=Math.max.apply(null,i);r.indicator.push({name:e[n].toString(),max:1.25*u})}for(var d in t)console.log(d,(0,o.default)(t[d])),s.data.push(d),a[0].data.push({name:d,value:t[d]});return{series:a,radar:r,legend:s}},funnel:function(e,t){return this.singledraw(e,t,"funnel",{normal:{position:"inside"}})},pie:function(e,t){return this.singledraw(e,t,"pie",{normal:{position:"outside"}})}}},337:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(400),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=s.default},338:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(905),o=r(s),n=a(903),l=r(n),i=a(904),u=r(i),d=a(910),c=r(d),f=a(909),m=r(f),p=a(907),h=r(p),v=a(908),b=r(v),g=a(906),_=(r(g),a(911)),y=r(_),x=[{path:"/login",component:o.default,name:"",hidden:!0},{path:"/404",component:l.default,name:"",hidden:!0},{path:"/",component:u.default,name:"",iconCls:"fa fa-database",leaf:!0,children:[{path:"/datasource",component:c.default,name:"数据源"}]},{path:"/",component:u.default,name:"图表配置",iconCls:"fa fa-table",children:[{path:"/aggr",component:h.default,name:"聚合筛选"},{path:"/multi-table",component:m.default,name:"关联合表"},{path:"/chart-maker",component:b.default,name:"制作图表"}]},{path:"/dashboard",component:u.default,name:"仪表盘",iconCls:"fa fa-area-chart",autolist:"dashboardlist",children:[{path:"/dashboard/:name",component:y.default,name:"仪表盘-"}]},{path:"*",hidden:!0,redirect:{path:"/404"}}];t.default=x},339:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(33),n=s(o),l=a(215),i=s(l),u=a(401),d=r(u),c=a(402),f=r(c);n.default.use(i.default);var m={count:10},p={INCREMENT:function(e){e.count++},DECREMENT:function(e){e.count--}};t.default=new i.default.Store({actions:d,getters:f,state:m,mutations:p})},342:function(e,t){},343:function(e,t){},344:function(e,t,a){a(892);var r=a(51)(a(388),a(913),null,null);e.exports=r.exports},388:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",components:{}}},389:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(69);t.default={data:function(){return{sysName:"NAVAN",collapsed:!1,sysUserName:"",sysUserAvatar:"",dashboardlist:[],form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},methods:{onSubmit:function(){console.log("submit!")},sectionTitle:function(){return this.$route.params.name?this.$route.name+this.$route.params.name:this.$route.name},handleopen:function(){},handleclose:function(){},handleselect:function(e,t){},logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{}).then(function(){sessionStorage.removeItem("user"),e.$router.push("/login")}).catch(function(){})},getDashboardList:function(){var e=this;(0,r.getDashboardList)().then(function(t){var a=[],r=t.data.dashboards;for(var s in r){var o=r[s];a.push({name:o.name,path:"/dashboard/"+o.name})}e.dashboardlist=a}).catch(function(t){e.handleError(t,"获取仪表盘列表失败")})},handleError:function(e,t){401==e.response.status?(this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"})):this.$message({message:t,type:"error"})},collapse:function(){},showMenu:function(e,t){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=t?"block":"none"},getDefaultDashboard:function(){var e=this;(0,r.getDashboardList)().then(function(t){var a=[],r=t.data.dashboards;for(var s in r){var o=r[s];a.push({name:o.name,path:"/dashboard/"+o.name})}e.dashboardlist=a,e.dashboardlist.length?e.$router.push({path:e.dashboardlist[0].path}):e.$router.push({path:"/"})}).catch(function(t){e.handleError(t,"获取仪表盘列表失败")})}},mounted:function(){var e=sessionStorage.getItem("user");e&&(e=JSON.parse(e),this.sysUserName=e.name||"",this.sysUserAvatar=e.avatar||""),this.getDashboardList()},updated:function(){},watch:{$route:function(e,t){"/dashboard"==e.path&&this.getDefaultDashboard()}}}},390:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(60),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a(69);t.default={data:function(){return{ensure:!1,registering:!1,logining:!1,ruleForm2:{account:"",checkPass:""},rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},methods:{onSubmit:function(){var e=this,t={username:this.ruleForm2.account,password:this.ruleForm2.checkPass};this.registering=!0,(0,o.userRegister)(t).then(function(t){e.registering=!1,e.ensure=!1,e.$message({message:"注册成功"})}).catch(function(t){e.registering=!1;var a="注册失败";a=t.hasOwnProperty("response")&&t.response.hasOwnProperty("data")&&t.response.data.hasOwnProperty("message")?a+":"+t.response.data.message:a,e.$message({message:a,type:"error"})})},handleRegister:function(){this.ensure=!0},handleReset2:function(){this.$refs.ruleForm2.resetFields()},handleSubmit2:function(e){var t=this;this.$refs.ruleForm2.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.logining=!0;var a={username:t.ruleForm2.account,password:t.ruleForm2.checkPass};(0,o.requestLogin)(a).then(function(e){t.logining=!1,console.log((0,s.default)(e)),sessionStorage.setItem("user",(0,s.default)(e)),t.$router.push({path:"/datasource"})}).catch(function(e){t.logining=!1,t.$message({message:"登陆失败,  用户名／密码错误",cause:e.toString(),type:"error"})})})}}}},391:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(132),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={data:function(){return{chartColumn:null,chartBar:null,chartLine:null,chartPie:null}},methods:{drawColumnChart:function(){this.chartColumn=s.default.init(document.getElementById("chartColumn")),this.chartColumn.setOption({title:{text:"Column Chart"},tooltip:{},xAxis:{data:["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]}]})},drawBarChart:function(){this.chartBar=s.default.init(document.getElementById("chartBar")),this.chartBar.setOption({title:{text:"Bar Chart",subtext:"数据来自网络"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["2011年","2012年"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:["巴西","印尼","美国","印度","中国","世界人口(万)"]},series:[{name:"2011年",type:"bar",data:[18203,23489,29034,104970,131744,630230]},{name:"2012年",type:"bar",data:[19325,23438,31e3,121594,134141,681807]}]})},drawLineChart:function(){this.chartLine=s.default.init(document.getElementById("chartLine")),this.chartLine.setOption({title:{text:"Line Chart"},tooltip:{trigger:"axis"},legend:{data:["邮件营销","联盟广告","搜索引擎"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"邮件营销",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:"搜索引擎",type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}]})},drawPieChart:function(){this.chartPie=s.default.init(document.getElementById("chartPie")),this.chartPie.setOption({title:{text:"Pie Chart",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},drawCharts:function(){this.drawColumnChart(),this.drawBarChart(),this.drawLineChart(),this.drawPieChart()}},mounted:function(){this.drawCharts()},updated:function(){this.drawCharts()}}},392:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(60),o=r(s),n=a(132),l=(r(n),a(69)),i=a(151);r(i);t.default={data:function(){return{form:{table:"",ds:null,xFields:[],yFields:[{name:[]}],filters:[{name:null,operator:null,value:null,value_type:"value"}],name:""},modify:!1,table:null,loading:!1,groups:["合表","基础表"],datasources:[],fields:[],tables:[[],[]],operators:[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"大于",value:">"},{label:"不小于",value:">="},{label:"小于",value:"<"},{label:"不大于",value:"<="},{label:"包含",value:"like"},{label:"不包含",value:"not like"},{label:"为空",value:"null"},{label:"不为空",value:"not null"}],ensure:!1,field_options:[],aggrs_type:[{value:"count",label:"计数"},{value:"distinct",label:"去重计数"},{value:"sum",label:"总和"},{value:"avg",label:"平均值"}]}},methods:{showData:function(){return null!=this.form.ds&&""!=this.form.table},onSure:function(){if(null==this.table)return void this.$message({message:"信息不完善",type:"warning"});this.ensure=!0},onSubmit:function(){var e=this;if(""==this.form.name)return void this.$message({message:"信息不完善",type:"warning"});var t={table:this.form.table,x_fields:this.form.xFields,y_fields:this.form.yFields,filters:this.form.filters};(0,l.addTable)({ds_id:this.form.ds,rules:t,name:this.form.name,type:"aggr"}).then(function(t){e.$message({message:"保存成功",type:"info"})}).catch(function(t){console.log((0,o.default)(t)),e.handleError(t,"保存失败")}),this.ensure=!1},removeValue:function(e){if(this.form.yFields.length<=1)return void(e.name=[]);var t=this.form.yFields.indexOf(e);-1!==t&&this.form.yFields.splice(t,1)},addValue:function(e){var t=this.form.yFields.indexOf(e);this.form.yFields.splice(t+1,0,{name:[],key:Date.now()})},removeFilter:function(e){if(this.form.filters.length<=1)return void(this.form.filters=[{name:null,operator:null,value:null,value_type:"value"}]);var t=this.form.filters.indexOf(e);-1!==t&&this.form.filters.splice(t,1)},addFilter:function(e){var t=this.form.filters.indexOf(e);this.form.filters.splice(t+1,0,{name:"",operator:"",value:"",value_type:"value",key:Date.now()})},getDadasources:function(){var e=this;(0,l.getDsListPage)({}).then(function(t){e.datasources=t.data.datasources.map(function(e){return{id:e.id,name:e.name,args:e.filelist?e.filelist.toString().length>21?e.filelist.toString().substring(0,18)+"...":e.filelist.toString():e.host+":"+e.port}})}).catch(function(t){e.handleError(t,"数据源列表获取失败")})},getTables:function(e){var t=this;this.tables=[[],[]],this.fields=[],(0,l.getDsTables)({ds_id:e}).then(function(e){-1==e.data.vtables.indexOf(t.form.table)&&-1==e.data.tables.indexOf(t.form.table)&&(t.form.table=""),t.tables=[e.data.vtables,e.data.tables]}).catch(function(e){t.handleError(e,"数据表列表获取失败")})},getSchema:function(e){var t=this;(0,l.getTableSchema)({ds_id:this.form.ds,tables:(0,o.default)([e])}).then(function(e){t.fields=e.data.schema[0].schema,t.field_options=[];for(var a in t.fields){var r=t.fields[a];t.field_options.push({value:r,label:r,children:t.aggrs_type})}}).catch(function(e){t.handleError(e,"字段信息获取失败")})},handleError:function(e,t){if(console.log(e),e.hasOwnProperty("response")&&401==e.response.status)this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"});else{var a=t;a=e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&e.response.data.hasOwnProperty("message")?t+":"+e.response.data.message:t,this.$message({message:a,type:"error"})}},previewData:function(){var e=this;if(this.showData()){var t={table:this.form.table,ds_id:this.form.ds,xFields:(0,o.default)(this.form.xFields),yFields:(0,o.default)(this.form.yFields),filters:(0,o.default)(this.form.filters)};this.loading=!0,(0,l.getAggrData)(t).then(function(t){e.table=t.data;for(var a in e.table.data)for(var r in e.table.data[a])e.table.data[a][r]=String(e.table.data[a][r]);e.loading=!1}).catch(function(t){e.handleError(t,"数据加载失败"),e.loading=!1})}}},mounted:function(){this.getDadasources()}}},393:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(223),o=r(s),n=a(60),l=r(n),i=a(132),u=r(i),d=a(69),c=a(151),f=r(c);t.default={data:function(){return{form:{table:"",ds:null,xFields:[],yFields:[{name:[]}],filters:[{name:null,operator:null,value:null,value_type:"value"}],type:"bar",chart_name:"",dashboards:[]},modify:!1,cloading:!1,groups:["合表","基础表"],datasources:[],tables:[[],[]],fields:[],chart:null,xAxis:[],yAxis:{},ensure:!1,dashboards:[],field_options:[],drawed:!1,eloading:!1,aggrs_type:[{value:"count",label:"计数"},{value:"distinct",label:"去重计数"},{value:"sum",label:"总和"},{value:"avg",label:"平均值"}],operators:[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"大于",value:">"},{label:"不小于",value:">="},{label:"小于",value:"<"},{label:"不大于",value:"<="},{label:"包含",value:"like"},{label:"不包含",value:"not like"},{label:"为空",value:"null"},{label:"不为空",value:"not null"}]}},methods:{showChart:function(){if(null==this.form.ds)return!1;if(""==this.form.table)return!1;for(var e in this.form.yFields)if(this.form.yFields[e].name.length>0)return!0;return 0!=this.form.xFields.length},onSure:function(){var e=this;(0,d.getDashboardList)().then(function(t){e.dashboards=t.data.dashboards}).catch(function(t){e.handleError(t,"获取仪表盘列表失败")}),this.ensure=!0},onSubmit:function(){var e=this;if(""==this.form.chart_name)return void this.$message({message:"请填写图表名称",type:"warning"});if(0==this.form.dashboards.length)return void this.$message({message:"请至少选择或创建一个仪表盘",type:"warning"});if(this.modify){var t={table:this.form.table,ds_id:this.form.ds,type:this.form.type,xFields:this.form.xFields,yFields:this.form.yFields,name:this.form.chart_name,dashboard:this.form.dashboards[0]};(0,d.putChart)(t).then(function(t){e.$message({message:"保存成功",type:"info"}),e.$router.push({path:"/dashboard/"+e.form.dashboards[0]})}).catch(function(t){e.handleError(t,"保存失败")})}else{(0,d.addDashboards)({names:this.form.dashboards}).then(function(e){console.log("dashboard list post successful!")}).catch(function(t){e.handleError(t,"保存失败")});var t={table:this.form.table,ds_id:this.form.ds,type:this.form.type,xFields:this.form.xFields,yFields:this.form.yFields,name:this.form.chart_name,dashboards:this.form.dashboards};(0,d.addChart)(t).then(function(t){e.$message({message:"保存成功",type:"info"}),e.$router.push({path:"/dashboard/"+e.form.dashboards[0]})}).catch(function(t){e.handleError(t,"保存失败")})}},removeValue:function(e){if(this.form.yFields.length<=1)return void(e.name=[]);var t=this.form.yFields.indexOf(e);-1!==t&&this.form.yFields.splice(t,1)},addValue:function(e){var t=this.form.yFields.indexOf(e);this.form.yFields.splice(t+1,0,{name:[],key:Date.now()})},getDadasources:function(){var e=this;(0,d.getDsListPage)({}).then(function(t){e.datasources=t.data.datasources.map(function(e){return{id:e.id,name:e.name,args:e.filelist?e.filelist.toString().length>21?e.filelist.toString().substring(0,18)+"...":e.filelist.toString():e.host+":"+e.port}})}).catch(function(t){e.handleError(t,"数据源列表获取失败")})},getTables:function(e){var t=this;this.tables=[[],[]],this.fields=[],(0,d.getDsTables)({ds_id:e}).then(function(e){-1==e.data.vtables.indexOf(t.form.table)&&-1==e.data.tables.indexOf(t.form.table)&&(t.form.table=""),t.tables=[e.data.vtables,e.data.tables]}).catch(function(e){t.handleError(e,"数据表列表获取失败")})},getSchema:function(e){var t=this;(0,d.getTableSchema)({ds_id:this.form.ds,tables:(0,l.default)([e])}).then(function(e){t.fields=e.data.schema[0].schema,t.field_options=[];for(var a in t.fields){var r=t.fields[a];t.field_options.push({value:r,label:r,children:t.aggrs_type})}}).catch(function(e){t.handleError(e,"字段信息获取失败")})},handleError:function(e,t){if(console.log(e),e.hasOwnProperty("response")&&401==e.response.status)this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"});else{var a=t;a=e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&e.response.data.hasOwnProperty("message")?t+":"+e.response.data.message:t,this.$message({message:a,type:"error"})}},draw:function(){if(null!=this.chart){this.chart.clear(),this["disabled"+this.form.type]()&&(this.form.type="bar");var e=f.default.draw_options("预览图表",this.form.type,this.xAxis,this.yAxis);this.chart.setOption(e)}},disabledradar:function(){return this.drawed&&0==(0,o.default)(this.yAxis).length},disabledfunnel:function(){return this.drawed&&(0,o.default)(this.yAxis).length>1},disabledstack:function(){return this.drawed&&(0,o.default)(this.yAxis).length<2},disabledstackarea:function(){return this.drawed&&(0,o.default)(this.yAxis).length<2},disabledarea:function(){return this.drawed&&0==(0,o.default)(this.yAxis).length},disabledpie:function(){return this.drawed&&(0,o.default)(this.yAxis).length>1},disabledbar:function(){return this.drawed&&0==(0,o.default)(this.yAxis).length},disabledline:function(){return this.drawed&&0==(0,o.default)(this.yAxis).length},previewChart:function(){var e=this;if(this.showChart()){var t={table:this.form.table,ds_id:this.form.ds,type:this.form.type,xFields:(0,l.default)(this.form.xFields),yFields:(0,l.default)(this.form.yFields),filters:(0,l.default)(this.form.filters)};this.cloading=!0,(0,d.getChart)(t).then(function(t){e.xAxis=t.data.columns,e.yAxis=t.data.data,null==e.chart&&(e.chart=u.default.init(document.getElementById("chart"))),e.draw(),e.drawed=!0,e.cloading=!1}).catch(function(t){e.cloading=!1,document.getElementById("chart").text="图表数据异常",console.log((0,l.default)(t)),e.handleError(t,"图表数据异常")})}}},mounted:function(){var e=this;if(0!=(0,o.default)(this.$route.query).length){this.eloading=!0,this.modify=!0;var t=this.$route.query;(0,d.getDashboardChart)({dashboard:t.bashboard,chart:t.chart}).then(function(a){e.form.ds=a.data.ds_id,e.form.table=a.data.table,e.form.xFields=a.data.xFields,e.form.yFields=a.data.yFields.map(function(e){return{name:[e.name,e.aggr_func]}}),e.form.type=a.data.type,e.eloading=!1,e.form.chart_name=t.chart,e.form.dashboards=[t.bashboard],e.previewChart()}).catch(function(a){console.log((0,l.default)(a),a),e.handleError(a,"图表 "+t+" 加载失败")})}this.getDadasources()}}},394:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(60),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=a(69);t.default={data:function(){return{form:{ds_options:[],tb_options:[[],[]],rule_options:[],ds:null,tb:[],rules:[{field1:[],field2:[]}],region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",tb_name:""},groups:["合表","普通表"],ensure:!1,tables:[],tableData:[["1","2","3","4","5","6"]]}},methods:{onSure:function(){if(null==this.form.ds||0==this.form.tb.length||0==this.form.rules[0].field1.length||0==this.form.rules[0].field2.length)return void this.$message({message:"信息不完善",type:"warning"});this.ensure=!0},onSubmit:function(){var e=this;(0,o.addTable)({ds_id:this.form.ds,rules:this.form.rules,name:this.form.tb_name}).then(function(t){e.$message({message:"保存成功",type:"info"})}).catch(function(t){console.log((0,s.default)(t)),e.handleError(t,"保存失败")}),this.ensure=!1},getHeaderWidth:function(e){e.length;return"100%"},renderHeader:function(e,t){return e("div",[e("font",[t.column.label],{attrs:{color:"red"}})],{attrs:{width:"100px"}})},handleError:function(e,t){401==e.response.status?(this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"})):this.$message({message:t,type:"error"})},getDadasources:function(){var e=this;(0,o.getDsListPage)({}).then(function(t){e.form.ds_options=t.data.datasources.map(function(e){return{id:e.id,name:e.name,args:e.filelist?e.filelist.toString().length>21?e.filelist.toString().substring(0,18)+"...":e.filelist.toString():e.host+":"+e.port}})}).catch(function(t){e.handleError(t,"数据源列表获取失败")})},getTables:function(e){var t=this;this.form.tb=[],(0,o.getDsTables)({ds_id:e}).then(function(e){t.form.tb_options=[e.data.vtables,e.data.tables]}).catch(function(e){console.log((0,s.default)(e)),t.handleError(e,"数据表列表获取失败")})},getPreviewdata:function(){var e=this;if(this.form.tb.length){(0,o.getTableSchema)({ds_id:this.form.ds,tables:(0,s.default)(this.form.tb)}).then(function(t){var a=t.data.schema,r=[];e.form.rule_options=[];for(var s in a){var t=[],o=a[s];for(var n in o.schema)t.push({value:o.schema[n],label:o.schema[n]});r.push({value:o.name,label:o.name,children:t})}for(var s in r)e.form.rule_options.push(r[s])}).catch(function(t){console.log((0,s.default)(t)),e.handleError(t,"字段信息获取失败")});var t={ds_id:this.form.ds,tables:(0,s.default)(this.form.tb),rules:(0,s.default)(this.form.rules)};(0,o.getPreviewData)(t).then(function(t){e.tables=t.data.tables;for(var a in e.tables)for(var r in e.tables[a].data)for(var s in e.tables[a].data[r])e.tables[a].data[r][s]=String(e.tables[a].data[r][s])}).catch(function(t){console.log((0,s.default)(t)),e.handleError(t,"预览数据获取失败")})}},getPreview:function(e){this.tables=[];for(var t in this.form.rules){var a=this.form.rules[t];a.field1.length>0&&-1==e.indexOf(a.field1[0])?this.removeRule(a):a.field2.length>0&&-1==e.indexOf(a.field2[0])&&this.removeRule(a)}this.getPreviewdata()},getPreview2:function(e,t){var a=this.form.rules.indexOf(e);if(0!=this.form.rules[a].field1.length&&0!=this.form.rules[a].field2.length){if(this.form.rules[a].field1[0]==this.form.rules[a].field2[0])return 1==t&&(this.form.rules[a].field1=[]),2==t&&(this.form.rules[a].field2=[]),void this.$message({message:"暂不支持自关联",type:"error"});this.tables=[],this.getPreviewdata()}},removeRule:function(e){if(this.form.rules.length<=1)return void(e.field1=e.field2=[]);var t=this.form.rules.indexOf(e);-1!==t&&this.form.rules.splice(t,1),e.field1.length>0&&e.field2.length>0&&this.getPreviewdata()},addRule:function(e){var t=this.form.rules.indexOf(e);this.form.rules.splice(t+1,0,{field1:[],field2:[],key:Date.now()})}},mounted:function(){this.getDadasources()}}},395:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(60),o=r(s),n=a(222),l=r(n),i=a(397),u=(r(i),a(69));t.default={data:function(){return{filters:{name:""},datasources:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{},editForm:{id:0,name:"",ttype:0,type:"MYSQL",host:"",port:"",username:"",password:"",oracle_type:"SID",oracle_value:"",connect_str:"",filelist:[],options_value:["MYSQL","CSV"]},options:[[{value:"MYSQL",label:"MYSQL"},{value:"OTHERDB",label:"其他数据库"}],[{value:"CSV",label:"CSV"},{value:"EXCEL",label:"EXCEL"}]],addFormVisible:!1,addLoading:!1,addFormRules:{},addForm:{id:0,name:"",ttype:0,type:"MYSQL",host:"",port:"",username:"",password:"",oracle_type:"SID",oracle_value:"",connect_str:"",filelist:[],options_value:["MYSQL","CSV"]}}},methods:{formatArgs:function(e,t){return 0==(-1==this.options[0].map(function(e){return e.value}).indexOf(e.type)?1:0)?e.host+":"+e.port:e.filelist.toString().length>21?e.filelist.toString().substring(0,18)+"...":e.filelist.toString()},typeChange:function(e){},submitUpload:function(){this.$refs.upload.submit()},addRemove:function(e,t){console.log(e,t)},putRemove:function(e,t){this.editForm.filelist.splice(this.editForm.filelist.indexOf(e.name),1)},handlePreview:function(e){console.log(e)},handleCurrentChange:function(e){this.page=e,this.getDadasources()},handleError:function(e,t){if(this.listLoading=!1,401==e.response.status)this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"});else{var a=t;a=e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&e.response.data.hasOwnProperty("message")?t+":"+e.response.data.message:t,this.$message({message:a,type:"error"})}},getDadasources:function(){var e=this,t={pagesize:20,page:this.page,name:this.filters.name};this.listLoading=!0,(0,u.getDsListPage)(t).then(function(t){e.total=t.data.total,e.datasources=t.data.datasources,e.listLoading=!1}).catch(function(t){e.handleError(t,"数据源列表获取失败")})},handleDel:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var e={id:t.id};(0,u.delDatasource)(e).then(function(e){a.listLoading=!1,a.$message({message:"删除成功",type:"success"}),a.getDadasources()}).catch(function(e){a.handleError(e,"数据源删除失败")})}).catch(function(){})},handleEdit:function(e,t){this.editFormVisible=!0;var a=-1==this.options[0].map(function(e){return e.value}).indexOf(t.type)?1:0,r=["MYSQL","CSV"],s=t.filelist&&t.filelist.map(function(e){return{name:e}});r[a]=t.type,this.editForm=(0,l.default)({},{ttype:a,host:"",port:"",options_value:r,connect_str:"",oracle_type:"SID",oracle_value:""},t,{filelist:s})},handleAdd:function(){this.addFormVisible=!0;var e=["MYSQL","CSV"];this.editForm=(0,l.default)({},{ttype:0,host:"",port:"",options_value:e,filelist:[],connect_str:"",oracle_type:"SID",oracle_value:""})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){1==e.editForm.ttype&&e.$refs.putupload.uploadFiles.length>e.$refs.putupload.fileList.length?e.$refs.putupload.submit():e.putSuccess(null,null,e.editForm.filelist)})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){1==e.addForm.ttype&&e.$refs.addupload.uploadFiles.length>e.$refs.addupload.fileList.length?e.$refs.addupload.submit():e.addSuccess(null,null,e.addForm.filelist)})})},putSuccess:function(e,t,a){var r=this;this.editLoading=!0;var s={host:this.editForm.host,port:this.editForm.port,connect_str:this.editForm.connect_str,filelist:a&&a.map(function(e){return e.name}),username:this.editForm.username,password:this.editForm.password,oracle_type:this.editForm.oracle_type,oracle_value:this.editForm.oracle_value},o=this.editForm.options_value[this.editForm.ttype],n={id:this.editForm.id,name:this.editForm.name,type:o,params:s};(0,u.putDatasource)(n).then(function(e){r.editLoading=!1,r.$message({message:"提交成功",type:"success"}),r.$refs.editForm.resetFields(),r.editFormVisible=!1,r.getDadasources()}).catch(function(e){r.editLoading=!1,r.handleError(e,"数据源信息修改失败")})},addSuccess:function(e,t,a){var r=this;this.addLoading=!0;var s={host:this.addForm.host,port:this.addForm.port,connect_str:this.addForm.connect_str,filelist:a&&a.map(function(e){return e.name}),username:this.addForm.username,password:this.addForm.password,oracle_type:this.addForm.oracle_type,oracle_value:this.addForm.oracle_value},o=this.addForm.options_value[this.addForm.ttype],n={name:this.addForm.name,type:o,params:s};(0,u.addDatasource)(n).then(function(e){r.addLoading=!1,r.$message({message:"提交成功",type:"success"}),r.addForm.filelist=[],r.$refs.addForm.resetFields(),r.addFormVisible=!1,r.getDadasources()}).catch(function(e){r.addLoading=!1,r.handleError(e,"数据源添加失败")})},addFailed:function(e,t,a){this.$message({message:"文件上传失败："+e.message,type:"error"})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,(0,u.delDsList)({ids:(0,o.default)(t)}).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getDadasources()}).catch(function(t){e.handleError(t,"数据源批量删除失败")})}).catch(function(){})}},mounted:function(){this.getDadasources()}}},396:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(60),o=r(s),n=a(132),l=r(n),i=a(69),u=a(151),d=r(u);t.default={data:function(){return{finished:{},chart:{},charts:[],name:null}},methods:{share:function(){alert("share "+this.name)},rmdash:function(){var e=this;this.$confirm("确认删除吗？","提示",{}).then(function(){(0,i.delDashboard)({name:e.name}).then(function(t){e.$message({message:"删除成功",type:"info"}),e.$router.push({path:"/dashboard"})}).catch(function(t){console.log((0,o.default)(t),t),e.handleError(t,"删除失败")})}).catch(function(e){})},handleError:function(e,t){if(e.hasOwnProperty("response")&&401==e.response.status)this.$message({message:"登陆失效",type:"error"}),this.$router.push({path:"/login"});else{var a=t;a=e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&e.response.data.hasOwnProperty("message")?t+":"+e.response.data.message:t,this.$message({message:a,type:"error"})}},getChartList:function(){var e=this;(0,i.getDashboardCharts)({dashboard:this.name}).then(function(t){e.charts=t.data.charts,e.$nextTick(function(){for(var e in this.charts)this.drawChart(this.charts[e])})}).catch(function(t){console.log((0,o.default)(t),t),e.handleError(t,"仪表盘 "+e.name+" 图表列表获取失败"),e.$router.push({path:"/404"})})},drawChart:function(e){var t=this;this.chart.hasOwnProperty(e)||(0,i.getDashboardChart)({dashboard:this.$route.params.name,chart:e}).then(function(a){var r=a.data,s=d.default.draw_options(e,r.type,r.columns,r.data);document.getElementById("chart-"+e)&&(t.chart[e]=l.default.init(document.getElementById("chart-"+e)),t.chart[e].setOption(s),t.$set(t.finished,e,!0))}).catch(function(a){t.$set(t.finished,e,!0),console.log((0,o.default)(a),a),t.handleError(a,"图表 "+e+" 加载失败")})},edit:function(e){this.$router.push({path:"/chart-maker",query:{bashboard:this.name,chart:e}})},remove:function(e){var t=this;this.$confirm("确认删除吗？","提示",{}).then(function(){(0,i.delChart)({dashboard:t.name,chart:e}).then(function(a){var r=t.charts.indexOf(e);-1!=r&&t.charts.splice(r,1),t.$message({message:"删除成功",type:"info"}),t.$router.push({path:"/dashboard/"+t.name})}).catch(function(e){console.log((0,o.default)(e),e),t.handleError(e,"删除失败")})})}},mounted:function(){this.name=this.$route.params.name,this.getChartList()},updated:function(){},watch:{$route:function(e,t){this.name=this.$route.params.name;for(var a in this.chart)this.chart[a].dispose();this.chart={},this.charts=[],this.finished={},this.getChartList()}}}},397:function(e,t,a){"use strict";function r(e,t){for(var t=t-(e+"").length,a=0;a<t;a++)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var s=/([yMdhsm])(\1*)/g;t.default={getQueryStringByName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t),r="";return null!=a&&(r=a[2]),t=null,a=null,null==r||""==r||"undefined"==r?"":r},formatDate:{format:function(e,t){return t=t||"yyyy-MM-dd",t.replace(s,function(t){switch(t.charAt(0)){case"y":return r(e.getFullYear(),t.length);case"M":return r(e.getMonth()+1,t.length);case"d":return r(e.getDate(),t.length);case"w":return e.getDay()+1;case"h":return r(e.getHours(),t.length);case"m":return r(e.getMinutes(),t.length);case"s":return r(e.getSeconds(),t.length)}})},parse:function(e,t){var a=t.match(s),r=e.match(/(\d)+/g);if(a.length==r.length){for(var o=new Date(1970,0,1),n=0;n<a.length;n++){var l=parseInt(r[n]);switch(a[n].charAt(0)){case"y":o.setFullYear(l);break;case"M":o.setMonth(l-1);break;case"d":o.setDate(l);break;case"h":o.setHours(l);break;case"m":o.setMinutes(l);break;case"s":o.setSeconds(l)}}return o}return null}}}},398:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=a(340),o=(r(s),a(33)),n=r(o),l=a(344),i=r(l),u=a(341),d=r(u);a(342);var c=a(345),f=r(c),m=a(339),p=r(m),h=a(215),v=r(h),b=a(338),g=r(b),_=a(337);r(_);a(343),n.default.use(d.default),n.default.use(f.default),n.default.use(v.default);var y=new f.default({routes:g.default});y.beforeEach(function(e,t,a){"/login"==e.path&&sessionStorage.removeItem("user"),JSON.parse(sessionStorage.getItem("user"))||"/login"==e.path?a():a({path:"/login"})}),new n.default({router:y,store:p.default,render:function(e){return e(i.default)}}).$mount("#app")},399:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Users=t.LoginUsers=void 0;for(var r=a(900),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=[{id:1,username:"admin",password:"123456",avatar:"https://raw.githubusercontent.com/taylorchen709/markdown-images/master/vueadmin/user.png",name:"张某某"}],n=[],l=0;l<86;l++)n.push(s.default.mock({id:s.default.Random.guid(),name:s.default.Random.cname(),ctime:s.default.Random.datetime(),host:"192.168.1.1",port:"3306",file:"test.csv",utime:s.default.Random.datetime(),type:["MYSQL","MSSQL","ORACLE","CSV"][s.default.Random.integer(0,3)],username:"root",password:"123456",filelist:[]}));t.LoginUsers=o,t.Users=n},400:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(60),o=r(s),n=a(404),l=r(n),i=a(149),u=r(i),d=a(368),c=r(d),f=a(399),m=f.Users;t.default={bootstrap:function(){var e=new c.default(u.default);e.onGet("/success").reply(200,{msg:"success"}),e.onGet("/error").reply(500,{msg:"failure"}),e.onPost("/login").reply(function(e){var t=JSON.parse(e.data),a=t.username,r=t.password;return new l.default(function(e,t){var s=null;setTimeout(function(){var t=f.LoginUsers.some(function(e){if(e.username===a&&e.password===r)return s=JSON.parse((0,o.default)(e)),s.password=void 0,!0});e(t?[200,{code:200,msg:"请求成功",user:s}]:[200,{code:500,msg:"账号或密码错误"}])},1e3)})}),e.onGet("/user/list").reply(function(e){var t=e.params.name,a=m.filter(function(e){return!t||-1!=e.name.indexOf(t)});return new l.default(function(e,t){setTimeout(function(){e([200,{users:a}])},1e3)})}),e.onGet("/datasource/list").reply(function(e){var t=e.params,a=t.page,r=t.name,s=m.filter(function(e){return!r||-1!=e.name.indexOf(r)}),o=s.length;return s=s.filter(function(e,t){return t<20*a&&t>=20*(a-1)}),new l.default(function(e,t){setTimeout(function(){e([200,{total:o,users:s}])},1e3)})}),e.onGet("/user/remove").reply(function(e){var t=e.params.id;return m=m.filter(function(e){return e.id!==t}),new l.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"删除成功"}])},500)})}),e.onGet("/user/batchremove").reply(function(e){var t=e.params.ids;return t=t.split(","),m=m.filter(function(e){return!t.includes(e.id)}),new l.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"删除成功"}])},500)})}),e.onGet("/user/edit").reply(function(e){var t=e.params,a=t.id,r=t.name,s=t.addr,o=t.age,n=t.birth,i=t.sex;return m.some(function(e){if(e.id===a)return e.name=r,e.addr=s,e.age=o,e.birth=n,e.sex=i,!0}),new l.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"编辑成功"}])},500)})}),e.onGet("/user/add").reply(function(e){var t=e.params,a=t.name,r=t.addr,s=t.age,o=t.birth,n=t.sex;return m.push({name:a,addr:r,age:s,birth:o,sex:n}),new l.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"新增成功"}])},500)})})}}},401:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.increment=function(e){(0,e.commit)("INCREMENT")},t.decrement=function(e){(0,e.commit)("DECREMENT")}},402:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getCount=function(e){return e.count}},69:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delFile=t.addDashboards=t.getDashboardChart=t.getDashboardCharts=t.getDashboardList=t.delDashboard=t.putChart=t.delChart=t.addChart=t.getChart=t.addTable=t.getTableSchema=t.getAggrData=t.getPreviewData=t.getDsTables=t.delDatasource=t.putDatasource=t.addDatasource=t.editUser=t.batchRemoveUser=t.removeUser=t.delDsList=t.getDsListPage=t.getUserList=t.userRegister=t.requestLogin=void 0;var r=a(149),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.requestLogin=function(e){return s.default.post("api/login",e).then(function(e){return e.data})},t.userRegister=function(e){return s.default.post("api/register",e).then(function(e){return e.data})},t.getUserList=function(e){return s.default.get("api/user/list",{params:e})},t.getDsListPage=function(e){return s.default.get("api/datasource/list",{params:e})},t.delDsList=function(e){return s.default.delete("api/datasource/list",{params:e})},t.removeUser=function(e){return s.default.get("api/user/remove",{params:e})},t.batchRemoveUser=function(e){return s.default.get("api/user/batchremove",{params:e})},t.editUser=function(e){return s.default.get("api/user/edit",{params:e})},t.addDatasource=function(e){return s.default.post("api/datasource",e)},t.putDatasource=function(e){return s.default.put("api/datasource",e)},t.delDatasource=function(e){return s.default.delete("api/datasource",{params:e})},t.getDsTables=function(e){return s.default.get("api/datasource/tables",{params:e})},t.getPreviewData=function(e){return s.default.get("api/data/joinpreview",{params:e})},t.getAggrData=function(e){return s.default.get("api/data/aggrpreview",{params:e})},t.getTableSchema=function(e){return s.default.get("api/table/schema",{params:e})},t.addTable=function(e){return s.default.post("api/table",e)},t.getChart=function(e){return s.default.get("api/chart",{params:e})},t.addChart=function(e){return s.default.post("api/chart",e)},t.delChart=function(e){return s.default.delete("api/chart",{params:e})},t.putChart=function(e){return s.default.put("api/chart",e)},t.delDashboard=function(e){return s.default.delete("api/dashboard",{params:e})},t.getDashboardList=function(e){return s.default.get("api/dashboard/list")},t.getDashboardCharts=function(e){return s.default.get("api/dashboard/chartlist",{params:e})},t.getDashboardChart=function(e){return s.default.get("api/dashboard/chart",{params:e})},t.addDashboards=function(e){return s.default.post("api/dashboard/list",e)},t.delFile=function(e){return s.default.delete("api/file",{params:e})}},892:function(e,t){},893:function(e,t){},894:function(e,t){},895:function(e,t){},896:function(e,t){},897:function(e,t){},898:function(e,t){},899:function(e,t){},903:function(e,t,a){a(897);var r=a(51)(null,a(919),"data-v-552f9c87",null);e.exports=r.exports},904:function(e,t,a){a(896);var r=a(51)(a(389),a(918),"data-v-51a2c380",null);e.exports=r.exports},905:function(e,t,a){a(893);var r=a(51)(a(390),a(915),"data-v-2c8a1058",null);e.exports=r.exports},906:function(e,t,a){a(899);var r=a(51)(a(391),a(921),"data-v-612c0ec1",null);e.exports=r.exports},907:function(e,t,a){a(895);var r=a(51)(a(392),a(917),null,null);e.exports=r.exports},908:function(e,t,a){var r=a(51)(a(393),a(914),null,null);e.exports=r.exports},909:function(e,t,a){var r=a(51)(a(394),a(912),null,null);e.exports=r.exports},910:function(e,t,a){a(898);var r=a(51)(a(395),a(920),"data-v-5634dd4e",null);e.exports=r.exports},911:function(e,t,a){a(894);var r=a(51)(a(396),a(916),"data-v-402129b6",null);e.exports=r.exports},912:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{margin:"20px 0px"},attrs:{label:"数据源","label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"数据源"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择数据源"},on:{change:e.getTables},model:{value:e.form.ds,callback:function(t){e.form.ds=t},expression:"form.ds"}},e._l(e.form.ds_options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.args))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数据表"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择数据表"},on:{change:e.getPreview},model:{value:e.form.tb,callback:function(t){e.form.tb=t},expression:"form.tb"}},e._l(e.groups,function(t,r){return a("el-option-group",{key:t,attrs:{label:t}},e._l(e.form.tb_options[r],function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))}))],1),e._v(" "),a("el-form-item",{attrs:{label:"表关联规则"}},e._l(e.form.rules,function(t,r){return a("div",{key:t.key,attrs:{label:"关联规则"+r}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.form.rule_options},on:{change:function(a){e.getPreview2(t,1)}},model:{value:t.field1,callback:function(e){t.field1=e},expression:"rule.field1"}}),e._v(" "),a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.form.rule_options},on:{change:function(a){e.getPreview2(t,2)}},model:{value:t.field2,callback:function(e){t.field2=e},expression:"rule.field2"}}),e._v(" "),a("el-button",{attrs:{icon:"plus"},on:{click:function(a){a.preventDefault(),e.addRule(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"delete"},on:{click:function(a){a.preventDefault(),e.removeRule(t)}}})],1)})),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSure}},[e._v("立即创建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建合表",visible:e.ensure},on:{"update:visible":function(t){e.ensure=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"合表名称","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tb_name,callback:function(t){e.form.tb_name=t},expression:"form.tb_name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.ensure=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1),e._v(" "),e._l(e.tables,function(t){return a("div",[e._l(t.names,function(t){return a("el-tag",{key:t,staticStyle:{margin:"5px 0px"},attrs:{type:"primary"}},[e._v(e._s(t))])}),e._v("-\n    "),a("el-tag",{staticStyle:{margin:"5px 0px"},attrs:{type:"success"}},[e._v("预览")]),e._v(" "),a("el-table",{staticStyle:{margin:"5px 0px"},attrs:{data:t.data,stripe:""}},e._l(t.columns,function(t){return a("el-table-column",{key:t,attrs:{prop:t,label:t},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-popover",{attrs:{placement:"top",trigger:"hover",content:r.row[t]}},[a("div",{staticClass:"name-wrapper",slot:"reference"},[a("el-tag",{attrs:{color:"transparent"}},[a("font",{attrs:{color:"black"}},[e._v(e._s(r.row[t]))])],1)],1)])]}}])})}))],2)})],2)},staticRenderFns:[]}},913:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},staticRenderFns:[]}},914:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.eloading,expression:"eloading"}],staticStyle:{margin:"20px 0px"},attrs:{label:"图表制作","label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"数据源"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择数据源"},on:{change:e.getTables},model:{value:e.form.ds,callback:function(t){e.form.ds=t},expression:"form.ds"}},e._l(e.datasources,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.args))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数据表"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getSchema},model:{value:e.form.table,callback:function(t){e.form.table=t},expression:"form.table"}},e._l(e.groups,function(t,r){return a("el-option-group",{key:t,attrs:{label:t}},e._l(e.tables[r],function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))}))],1),e._v(" "),a("el-form-item",{attrs:{label:"过滤条件"}},e._l(e.form.filters,function(t){return a("div",{staticClass:"block"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"字段"},model:{value:t.name,callback:function(e){t.name=e},expression:"field.name"}},e._l(e.fields,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"运算符"},model:{value:t.operator,callback:function(e){t.operator=e},expression:"field.operator"}},e._l(e.operators,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.value,callback:function(e){t.value=e},expression:"field.value"}},[a("el-select",{attrs:{placeholder:"请选择"},slot:"prepend",model:{value:t.value_type,callback:function(e){t.value_type=e},expression:"field.value_type"}},[a("el-option",{key:"1",attrs:{label:"数  值",value:"value"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"表达式",value:"func"}})],1)],1)],1),e._v(" "),a("el-button",{attrs:{icon:"plus"},on:{click:function(a){a.preventDefault(),e.addFilter(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"delete"},on:{click:function(a){a.preventDefault(),e.removeFilter(t)}}})],1)],1)})),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择字段"},model:{value:e.form.xFields,callback:function(t){e.form.xFields=t},expression:"form.xFields"}},e._l(e.fields,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数值"}},e._l(e.form.yFields,function(t){return a("div",{staticClass:"block"},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.field_options},model:{value:t.name,callback:function(e){t.name=e},expression:"field.name"}}),e._v(" "),a("el-button",{attrs:{icon:"plus"},on:{click:function(a){a.preventDefault(),e.addValue(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"delete"},on:{click:function(a){a.preventDefault(),e.removeValue(t)}}})],1)})),e._v(" "),a("el-form-item",{attrs:{label:"图表类型"}},[a("el-radio-group",{on:{change:function(t){e.draw()}},model:{value:e.form.type,callback:function(t){e.form.type=t},expression:"form.type"}},[a("el-radio-button",{attrs:{label:"bar",disabled:e.disabledbar()}},[e._v("柱形图")]),e._v(" "),a("el-radio-button",{attrs:{label:"line",disabled:e.disabledline()}},[e._v("折线图")]),e._v(" "),a("el-radio-button",{attrs:{label:"stack",disabled:e.disabledstack()}},[e._v("堆积图")]),e._v(" "),a("el-radio-button",{attrs:{label:"area",disabled:e.disabledarea()}},[e._v("面积图")]),e._v(" "),a("el-radio-button",{attrs:{label:"stackarea",disabled:e.disabledstackarea()}},[e._v("面积堆积图")]),e._v(" "),a("el-radio-button",{attrs:{label:"funnel",disabled:e.disabledfunnel()}},[e._v("漏斗图")]),e._v(" "),a("el-radio-button",{attrs:{label:"radar",disabled:e.disabledradar()}},[e._v("雷达图")]),e._v(" "),a("el-radio-button",{attrs:{label:"pie",disabled:e.disabledpie()}},[e._v("饼 图")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.previewChart}},[e._v("预览图表")]),e._v(" "),e.modify?a("el-button",{attrs:{type:"primary"},on:{click:e.onSure}},[e._v("立即保存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.onSure}},[e._v("立即创建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建图表",visible:e.ensure},on:{"update:visible":function(t){e.ensure=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"图表名称","label-width":"100px"}},[a("el-input",{attrs:{disabled:e.modify,"auto-complete":"off"},model:{value:e.form.chart_name,callback:function(t){e.form.chart_name=t},expression:"form.chart_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仪表盘名称","label-width":"100px"}},[a("el-select",{attrs:{disabled:e.modify,multiple:"",filterable:"","allow-create":"",placeholder:"请选择仪表盘，输入新名称可创建"},model:{value:e.form.dashboards,callback:function(t){e.form.dashboards=t},expression:"form.dashboards"}},e._l(e.dashboards,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.ensure=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showChart(),expression:"showChart()"},{name:"loading",rawName:"v-loading",value:e.cloading,expression:"cloading"}],staticStyle:{width:"100%",height:"400px"},attrs:{id:"chart"}})],1)},staticRenderFns:[]}},915:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-container",attrs:{model:e.ruleForm2,rules:e.rules2,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm2.account,callback:function(t){e.ruleForm2.account=t},expression:"ruleForm2.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.ruleForm2.checkPass=t},expression:"ruleForm2.checkPass"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.handleRegister(t)}}},[e._v("注册")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){t.preventDefault(),e.handleSubmit2(t)}}},[e._v("登录")])],1),e._v(" "),a("el-dialog",{attrs:{title:"注册",visible:e.ensure},on:{"update:visible":function(t){e.ensure=t}}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请填入邮箱"},model:{value:e.ruleForm2.account,callback:function(t){e.ruleForm2.account=t},expression:"ruleForm2.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请设置密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.ruleForm2.checkPass=t},expression:"ruleForm2.checkPass"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.ensure=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.registering},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]}},916:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-container"},[a("div",{staticStyle:{margin:"20px 0px"},attrs:{align:"right"}},[a("el-button",{attrs:{icon:"share",size:"small"},on:{click:function(t){e.share()}}}),e._v(" "),a("el-button",{attrs:{icon:"delete",size:"small"},on:{click:function(t){e.rmdash()}}})],1),e._v(" "),a("el-row",e._l(e.charts,function(t){return a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:!e.finished[t],expression:"!finished[name]"}],key:t,attrs:{span:24}},[a("div",{attrs:{align:"right"}},[a("el-button",{attrs:{icon:"edit",size:"mini"},on:{click:function(a){e.edit(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"close",size:"mini"},on:{click:function(a){e.remove(t)}}})],1),e._v(" "),a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chart-"+t},on:{mounted:function(a){e.drawChart(t)}}})])}))],1)},staticRenderFns:[]}},917:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{margin:"20px 0px"},attrs:{label:"聚合筛选","label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"数据源"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择数据源"},on:{change:e.getTables},model:{value:e.form.ds,callback:function(t){e.form.ds=t},expression:"form.ds"}},e._l(e.datasources,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.args))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数据表"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getSchema},model:{value:e.form.table,callback:function(t){e.form.table=t},expression:"form.table"}},e._l(e.groups,function(t,r){return a("el-option-group",{key:t,attrs:{label:t}},e._l(e.tables[r],function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))}))],1),e._v(" "),a("el-form-item",{attrs:{label:"过滤条件"}},e._l(e.form.filters,function(t){return a("div",{staticClass:"block"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"字段"},model:{value:t.name,callback:function(e){t.name=e},expression:"field.name"}},e._l(e.fields,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"运算符"},model:{value:t.operator,callback:function(e){t.operator=e},expression:"field.operator"}},e._l(e.operators,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.value,callback:function(e){t.value=e},expression:"field.value"}},[a("el-select",{attrs:{placeholder:"请选择"},slot:"prepend",model:{value:t.value_type,callback:function(e){t.value_type=e},expression:"field.value_type"}},[a("el-option",{key:"1",attrs:{label:"数  值",value:"value"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"表达式",value:"func"}})],1)],1)],1),e._v(" "),a("el-button",{attrs:{icon:"plus"},on:{click:function(a){a.preventDefault(),e.addFilter(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"delete"},on:{click:function(a){a.preventDefault(),e.removeFilter(t)}}})],1)],1)})),e._v(" "),a("el-form-item",{attrs:{label:"维度"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择字段"},model:{value:e.form.xFields,callback:function(t){e.form.xFields=t},expression:"form.xFields"}},e._l(e.fields,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数值"}},e._l(e.form.yFields,function(t){return a("div",{staticClass:"block"},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.field_options},model:{value:t.name,callback:function(e){t.name=e},expression:"field.name"}}),e._v(" "),a("el-button",{attrs:{icon:"plus"},on:{click:function(a){a.preventDefault(),e.addValue(t)}}}),e._v(" "),a("el-button",{attrs:{icon:"delete"},on:{click:function(a){a.preventDefault(),e.removeValue(t)}}})],1)})),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.previewData}},[e._v("预览数据")]),e._v(" "),e.modify?a("el-button",{attrs:{type:"primary"},on:{click:e.onSure}},[e._v("立即保存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.onSure}},[e._v("立即创建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建合表",visible:e.ensure},on:{"update:visible":function(t){e.ensure=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"合表名称","label-width":"100px"}},[a("el-input",{attrs:{disabled:e.modify,"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.ensure=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1),e._v(" "),null!=e.table?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"400px"},attrs:{id:"chart"}},[a("el-tag",{staticStyle:{margin:"5px 0px"},attrs:{type:"success"}},[e._v("预览")]),e._v(" "),a("el-table",{staticStyle:{margin:"5px 0px"},attrs:{data:e.table.data,stripe:""}},e._l(e.table.columns,function(t){return a("el-table-column",{key:t,attrs:{prop:t,label:t},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-popover",{attrs:{placement:"top",trigger:"hover",content:r.row[t]}},[a("div",{staticClass:"name-wrapper",slot:"reference"},[a("el-tag",{attrs:{color:"transparent"}},[a("font",{attrs:{color:"black"}},[e._v(e._s(r.row[t]))])],1)],1)])]}}])})}))],1):e._e()],1)},staticRenderFns:[]}},918:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"container"},[a("el-col",{staticClass:"header",attrs:{span:24}},[a("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n\t\t\t\t"+e._s(e.collapsed?"":e.sysName)+"\n\t\t\t")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"tools",on:{click:function(t){t.preventDefault(),e.collapse(t)}}},[a("i",{staticClass:"fa fa-align-justify"})])]),e._v(" "),a("el-col",{staticClass:"userinfo",attrs:{span:4}},[a("el-dropdown",{attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[a("img",{attrs:{src:this.sysUserAvatar}}),e._v(" "+e._s(e.sysUserName))]),e._v(" "),a("el-dropdown-menu",{slot:"dropdown"},[a("el-dropdown-item",[e._v("我的消息")]),e._v(" "),a("el-dropdown-item",[e._v("设置")]),e._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){e.logout(t)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"main",attrs:{span:24}},[a("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[a("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,"unique-opened":"",router:""},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.$router.options.routes,function(t,r){return t.hidden?e._e():[t.autolist?a("el-submenu",{attrs:{index:r+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(e.dashboardlist,function(t){return a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v("\n                             "+e._s(t.name)+"\n\t\t\t\t\t\t    ")])})],2):t.leaf?t.children.length>0?a("el-menu-item",{attrs:{index:t.children[0].path}},[a("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e():a("el-submenu",{attrs:{index:r+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])})],2)]})],2),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"menuCollapsed",staticClass:"el-menu el-menu-vertical-demo collapsed"},e._l(e.$router.options.routes,function(t,r){return t.hidden?e._e():a("li",{staticClass:"el-submenu item"},[t.leaf?[a("li",{staticClass:"el-submenu"},[a("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(a){e.$router.push(t.children[0].path)}}},[a("i",{class:t.iconCls})])])]:[a("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(t){e.showMenu(r,!0)},mouseout:function(t){e.showMenu(r,!1)}}},[a("i",{class:t.iconCls})]),e._v(" "),a("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+r,on:{mouseover:function(t){e.showMenu(r,!0)},mouseout:function(t){e.showMenu(r,!1)}}},e._l(t.children,function(t){return t.hidden?e._e():a("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(a){e.$router.push(t.path)}}},[e._v(e._s(t.name))])}))]],2)}))],1),e._v(" "),a("section",{staticClass:"content-container"},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("strong",{staticClass:"title"},[e._v(e._s(e.sectionTitle()))]),e._v(" "),a("el-breadcrumb",{staticClass:"breadcrumb-inner",attrs:{separator:"/"}},e._l(e.$route.matched,function(t){return a("el-breadcrumb-item",{key:t.path},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t")])}))],1),e._v(" "),a("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)])])],1)},staticRenderFns:[]}},919:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("p",{staticClass:"page-container"},[e._v("404 page not found")])},staticRenderFns:[]}},920:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.filters.name,callback:function(t){e.filters.name=t},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getDadasources}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.datasources,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"ID",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"args",label:"参数",width:"150",formatter:e.formatArgs}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间","min-width":"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"utime",label:"修改时间","min-width":"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":20,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑","close-on-click-modal":!1},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.editForm.name=t},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据源类型",prop:"maintype"}},[a("el-radio-group",{attrs:{prop:"maintype"},on:{change:e.typeChange},model:{value:e.editForm.ttype,callback:function(t){e.editForm.ttype=t},expression:"editForm.ttype"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("数据库")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("文件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据源类型",prop:"secdtype"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.options_value[e.editForm.ttype],callback:function(t){e.$set(e.editForm.options_value,e.editForm.ttype,t)},expression:"editForm.options_value[editForm.ttype]"}},e._l(e.options[e.editForm.ttype],function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),1===e.editForm.ttype?a("div",[a("el-form-item",{attrs:{label:"上传文件",prop:"putfilelist"}},[a("el-upload",{ref:"putupload",staticClass:"upload-demo",attrs:{"file-list":e.editForm.filelist,"on-success":e.putSuccess,"on-error":e.addFailed,action:"/api/file","auto-upload":!1,"on-remove":e.putRemove,data:{path:"datasource/"+e.editForm.name}}},[a("el-button",{attrs:{size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("文件大小不超过500MB")])],1)],1)],1):"OTHERDB"===e.editForm.options_value[e.editForm.ttype]?a("div",[a("el-form-item",{attrs:{label:"连接字符串",prop:"connect_str"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.connect_str,callback:function(t){e.editForm.connect_str=t},expression:"editForm.connect_str"}})],1)],1):a("div",[a("el-form-item",{attrs:{label:"服务器地址",prop:"host"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.host,callback:function(t){e.editForm.host=t},expression:"editForm.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.port,callback:function(t){e.editForm.port=t},expression:"editForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.username,callback:function(t){e.editForm.username=t},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.editForm.password,callback:function(t){e.editForm.password=t},expression:"editForm.password"}})],1)],1),e._v(" "),"ORACLE"===e.editForm.options_value[e.editForm.ttype]?a("div",[a("el-form-item",{attrs:{label:"连接类型"}},[a("el-radio-group",{model:{value:e.editForm.oracle_type,callback:function(t){e.editForm.oracle_type=t},expression:"editForm.oracle_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:"SID"}},[e._v("SID")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"SERVERNAME"}},[e._v("服务名")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"SID"===e.editForm.oracle_type?"SID":"服务名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.oracle_value,callback:function(t){e.editForm.oracle_value=t},expression:"editForm.oracle_value"}})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增","close-on-click-modal":!1},model:{value:e.addFormVisible,callback:function(t){e.addFormVisible=t},expression:"addFormVisible"}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"数据源名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.addForm.name=t},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据源类型",prop:"maintype"}},[a("el-radio-group",{attrs:{prop:"type"},on:{change:e.typeChange},model:{value:e.addForm.ttype,callback:function(t){e.addForm.ttype=t},expression:"addForm.ttype"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("数据库")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("文件")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据源类型",prop:"secdtype"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.options_value[e.addForm.ttype],callback:function(t){e.$set(e.addForm.options_value,e.addForm.ttype,t)},expression:"addForm.options_value[addForm.ttype]"}},e._l(e.options[e.addForm.ttype],function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),1===e.addForm.ttype?a("div",[a("el-form-item",{attrs:{label:"上传文件",prop:"addfilelist"}},[a("el-upload",{ref:"addupload",staticClass:"upload-demo",attrs:{"on-success":e.addSuccess,"on-error":e.addFailed,"on-remove":e.addRemove,"file-list":e.addForm.filelist,action:"/api/file","auto-upload":!1,data:{path:"datasource/"+e.addForm.name}}},[a("el-button",{attrs:{size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("文件大小不超过50MB")])],1)],1)],1):"OTHERDB"===e.addForm.options_value[e.addForm.ttype]?a("div",[a("el-form-item",{attrs:{label:"连接字符串",prop:"connect_str"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.connect_str,callback:function(t){e.addForm.connect_str=t},expression:"addForm.connect_str"}})],1)],1):a("div",[a("el-form-item",{attrs:{label:"服务器地址",prop:"host"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.host,callback:function(t){e.addForm.host=t},expression:"addForm.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.port,callback:function(t){e.addForm.port=t},expression:"addForm.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.username,callback:function(t){e.addForm.username=t},expression:"addForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.addForm.password,callback:function(t){e.addForm.password=t},expression:"addForm.password"}})],1)],1),e._v(" "),"ORACLE"===e.addForm.options_value[e.addForm.ttype]?a("div",[a("el-form-item",{attrs:{label:"连接类型"}},[a("el-radio-group",{model:{value:e.addForm.oracle_type,callback:function(t){e.addForm.oracle_type=t},expression:"addForm.oracle_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:"SID"}},[e._v("SID")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"SERVERNAME"}},[e._v("服务名")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"SID"===e.addForm.oracle_type?"SID":"服务名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.oracle_value,callback:function(t){e.addForm.oracle_value=t},expression:"addForm.oracle_value"}})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},921:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"chart-container"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartColumn"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartBar"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartLine"}})]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartPie"}})]),e._v(" "),a("el-col",{attrs:{span:24}},[a("a",{staticStyle:{float:"right"},attrs:{href:"http://echarts.baidu.com/examples.html",target:"_blank"}},[e._v("more>>")])])],1)],1)},staticRenderFns:[]}}},[398]);
//# sourceMappingURL=app.71779a30245d4fbae1b7.js.map